      # Trova la cartella più recente
      - name: Find latest folder
        id: find_latest_folder
        run: |
          echo "Starting to find the latest folder"
          # Comando migliorato per trovare la cartella più recente
          latest_folder=$(find "src/2 - RTB" -type d -not -path "*/PDF/*" -not -path "*/images/*" -not -path "*/contents/*" -exec stat --format='%Y %n' {} \; | sort -nr | head -n 1 | awk '{print $2}')
          
          # Debugging per stampare il valore di latest_folder
          echo "Found latest folder: $latest_folder"
          
          # Se la cartella è dentro 'images' o 'contents', scende di una cartella
          if [[ "$latest_folder" == *"/images"* ]] || [[ "$latest_folder" == *"/contents"* ]]; then
            echo "The latest modification is inside 'images' or 'contents'. Using the parent folder instead."
            latest_folder=$(dirname "$latest_folder")
          fi

          # Se non è stata trovata nessuna cartella valida, fermati
          if [ -z "$latest_folder" ]; then
            echo "Error: No valid folder found in src/2 - RTB"
            exit 1
          fi

          echo "Latest folder: $latest_folder"
          echo "LATEST_FOLDER=$latest_folder" >> $GITHUB_ENV

      # Trova il file .tex principale nella cartella più recente
      - name: Find main .tex file
        id: find_tex
        run: |
          if [ -z "${{ env.LATEST_FOLDER }}" ]; then
            echo "Error: LATEST_FOLDER is empty"
            exit 1
          fi

          echo "Searching for main .tex file in folder: ${{ env.LATEST_FOLDER }}"

          main_tex=$(find "${{ env.LATEST_FOLDER }}" -type f -not -path "*/images/*" -not -path "*/contents/*" -name "*.tex" | sort -nr | head -n 1)
          
          if [ -z "$main_tex" ]; then
            echo "Error: No .tex file found in the latest folder"
            exit 1
          fi
          
          echo "Main TeX file: $main_tex"
          echo "MAIN_TEX=$main_tex" >> $GITHUB_ENV
